<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Vulkan.Extensions.VK_KHR_shader_float_controls</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">vulkan-3.7: Bindings to the Vulkan graphics API.</span><ul class="links" id="page-menu"><li><a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html">Source</a></li><li><a href="https://hackage.haskell.org/package/vulkan-3.7">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Vulkan.Extensions.VK_KHR_shader_float_controls</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Name</h1><p>VK_KHR_shader_float_controls - device extension</p><h2>VK_KHR_shader_float_controls</h2><dl><dt><strong>Name String</strong></dt><dd><code>VK_KHR_shader_float_controls</code></dd></dl><dl><dt><strong>Extension Type</strong></dt><dd>Device extension</dd><dt><strong>Registered Extension Number</strong></dt><dd>198</dd><dt><strong>Revision</strong></dt><dd>4</dd><dt><strong>Extension and Version Dependencies</strong></dt><dd><ul><li>Requires Vulkan 1.0</li><li>Requires <code>VK_KHR_get_physical_device_properties2</code></li></ul></dd><dt><strong>Deprecation state</strong></dt><dd><ul><li><em>Promoted</em> to
    <a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#versions-1.2-promotions">Vulkan 1.2</a></li></ul></dd><dt><strong>Contact</strong></dt><dd><ul><li>Alexander Galazin
    <a href="https://github.com/KhronosGroup/Vulkan-Docs/issues/new?title=VK_KHR_shader_float_controls:%20&amp;body=@alegal-arm%20">https://github.com/KhronosGroup/Vulkan-Docs/issues/new?title=VK_KHR_shader_float_controls:%20&amp;body=@alegal-arm%20</a></li></ul></dd></dl><h2>Other Extension Metadata</h2><dl><dt><strong>Last Modified Date</strong></dt><dd>2018-09-11</dd></dl><dl><dt><strong>Interactions and External Dependencies</strong></dt><dd><ul><li>Promoted to Vulkan 1.2 Core</li><li>This extension requires
    <a href="https://htmlpreview.github.io/?https://github.com/KhronosGroup/SPIRV-Registry/blob/master/extensions/KHR/SPV_KHR_float_controls.html">SPV_KHR_float_controls</a></li></ul></dd><dt><strong>IP Status</strong></dt><dd>No known IP claims.</dd><dt><strong>Contributors</strong></dt><dd><ul><li>Alexander Galazin, Arm</li><li>Jan-Harald Fredriksen, Arm</li><li>Jeff Bolz, NVIDIA</li><li>Graeme Leese, Broadcom</li><li>Daniel Rakos, AMD</li></ul></dd></dl><h2>Description</h2><p>The <code>VK_KHR_shader_float_controls</code> extension enables efficient use of
 floating-point computations through the ability to query and override
 the implementation&#8217;s default behavior for rounding modes, denormals,
 signed zero, and infinity.</p><h2>Promotion to Vulkan 1.2</h2><p>All functionality in this extension is included in core Vulkan 1.2, with
 the KHR suffix omitted. The original type, enum and command names are
 still available as aliases of the core functionality.</p><h2>New Structures</h2><ul><li><p>Extending
     <code><a href="Vulkan-Core11-Promoted_From_VK_KHR_get_physical_device_properties2.html#v:PhysicalDeviceProperties2" title="Vulkan.Core11.Promoted_From_VK_KHR_get_physical_device_properties2">PhysicalDeviceProperties2</a></code>:</p><ul><li><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#t:PhysicalDeviceFloatControlsPropertiesKHR" title="Vulkan.Extensions.VK_KHR_shader_float_controls">PhysicalDeviceFloatControlsPropertiesKHR</a></code></li></ul></li></ul><h2>New Enums</h2><ul><li><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#t:ShaderFloatControlsIndependenceKHR" title="Vulkan.Extensions.VK_KHR_shader_float_controls">ShaderFloatControlsIndependenceKHR</a></code></li></ul><h2>New Enum Constants</h2><ul><li><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#t:KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME" title="Vulkan.Extensions.VK_KHR_shader_float_controls">KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME</a></code></li></ul><ul><li><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#t:KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION" title="Vulkan.Extensions.VK_KHR_shader_float_controls">KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION</a></code></li><li><p>Extending
     <code><a href="Vulkan-Core12-Enums-ShaderFloatControlsIndependence.html#t:ShaderFloatControlsIndependence" title="Vulkan.Core12.Enums.ShaderFloatControlsIndependence">ShaderFloatControlsIndependence</a></code>:</p><ul><li><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_32_BIT_ONLY_KHR" title="Vulkan.Extensions.VK_KHR_shader_float_controls">SHADER_FLOAT_CONTROLS_INDEPENDENCE_32_BIT_ONLY_KHR</a></code></li><li><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_ALL_KHR" title="Vulkan.Extensions.VK_KHR_shader_float_controls">SHADER_FLOAT_CONTROLS_INDEPENDENCE_ALL_KHR</a></code></li><li><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_NONE_KHR" title="Vulkan.Extensions.VK_KHR_shader_float_controls">SHADER_FLOAT_CONTROLS_INDEPENDENCE_NONE_KHR</a></code></li></ul></li><li><p>Extending <code><a href="Vulkan-Core10-Enums-StructureType.html#t:StructureType" title="Vulkan.Core10.Enums.StructureType">StructureType</a></code>:</p><ul><li><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#v:STRUCTURE_TYPE_PHYSICAL_DEVICE_FLOAT_CONTROLS_PROPERTIES_KHR" title="Vulkan.Extensions.VK_KHR_shader_float_controls">STRUCTURE_TYPE_PHYSICAL_DEVICE_FLOAT_CONTROLS_PROPERTIES_KHR</a></code></li></ul></li></ul><h2>New SPIR-V Capabilities</h2><ul><li><a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#spirvenv-capabilities-table-shaderfloatcontrols">DenormPreserve</a></li></ul><ul><li><a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#spirvenv-capabilities-table-shaderfloatcontrols">DenormFlushToZero</a></li><li><a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#spirvenv-capabilities-table-shaderfloatcontrols">SignedZeroInfNanPreserve</a></li><li><a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#spirvenv-capabilities-table-shaderfloatcontrols">RoundingModeRTE</a></li><li><a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#spirvenv-capabilities-table-shaderfloatcontrols">RoundingModeRTZ</a></li></ul><h2>Issues</h2><p>1) Which instructions must flush denorms?</p><p><strong>RESOLVED</strong>: Only floating-point conversion, floating-point arithmetic,
 floating-point relational (except <code>OpIsNaN</code>, <code>OpIsInf</code>), and
 floating-point GLSL.std.450 extended instructions must flush denormals.</p><p>2) What is the denorm behavior for intermediate results?</p><p><strong>RESOLVED</strong>: When a SPIR-V instruction is implemented as a sequence of
 other instructions: - in the <code>DenormFlushToZero</code> execution mode the
 intermediate instructions may flush denormals, the final result of the
 sequence <em>must</em> not be denormal. - in the <code>DenormPreserve</code> execution
 mode denormals must be preserved throughout the whole sequence.</p><p>3) Do denorm and rounding mode controls apply to <code>OpSpecConstantOp</code>?</p><p><strong>RESOLVED</strong>: Yes, except when the opcode is <code>OpQuantizeToF16</code>.</p><p>4) The SPIR-V specification says that <code>OpConvertFToU</code> and
 <code>OpConvertFToS</code> unconditionally round towards zero. Do the rounding mode
 controls specified through the execution modes apply to them?</p><p><strong>RESOLVED</strong>: No, these instructions unconditionally round towards zero.</p><p>5) Do any of the &quot;Pack&quot; GLSL.std.450 instructions count as conversion
 instructions and have the rounding mode apply?</p><p><strong>RESOLVED</strong>: No, only instructions listed in the section &quot;3.32.11.
 Conversion Instructions&quot; of the SPIR-V specification count as
 conversion instructions.</p><p>6) When using inf/nan-ignore mode, what is expected of <code>OpIsNan</code> and
 <code>OpIsInf</code>?</p><p><strong>RESOLVED</strong>: These instructions must always accurately detect inf/nan
 if it is passed to them.</p><h2>Version 4 API incompatibility</h2><p>The original versions of <code>VK_KHR_shader_float_controls</code> shipped with
 booleans named &#8220;separateDenormSettings&#8221; and
 &#8220;separateRoundingModeSettings&#8221;, which at first glance could have
 indicated &#8220;they can all independently set, or not&#8221;. However the spec
 language as written indicated that the 32-bit value could always be set
 independently, and only the 16- and 64-bit controls needed to be the
 same if these values were <code><a href="Vulkan-Core10-FundamentalTypes.html#v:FALSE" title="Vulkan.Core10.FundamentalTypes">FALSE</a></code>.</p><p>As a result of this slight disparity, and lack of test coverage for this
 facet of the extension, we ended up with two different behaviors in the
 wild, where some implementations worked as written, and others worked
 based on the naming. As these are hard limits in hardware with reasons
 for exposure as written, it was not possible to standardise on a single
 way to make this work within the existing API.</p><p>No known users of this part of the extension exist in the wild, and as
 such the Vulkan WG took the unusual step of retroactively changing the
 once boolean value into a tri-state enum, breaking source compatibility.
 This was however done in such a way as to retain ABI compatibility, in
 case any code using this did exist; with the numerical values 0 and 1
 retaining their original specified meaning, and a new value signifying
 the additional &#8220;all need to be set together&#8221; state. If any applications
 exist today, compiled binaries will continue to work as written in most
 cases, but will need changes before the code can be recompiled.</p><h2>Version History</h2><ul><li><p>Revision 4, 2019-06-18 (Tobias Hector)</p><ul><li>Modified settings restrictions, see
    <a href="VK_KHR_shader_controls_v4_incompatibility.html">VK_KHR_shader_controls_v4_incompatibility</a></li></ul></li></ul><ul><li><p>Revision 3, 2018-09-11 (Alexander Galazin)</p><ul><li>Minor restructuring</li></ul></li><li><p>Revision 2, 2018-04-17 (Alexander Galazin)</p><ul><li>Added issues and resolutions</li></ul></li><li><p>Revision 1, 2018-04-11 (Alexander Galazin)</p><ul><li>Initial draft</li></ul></li></ul><h1>See Also</h1><p><code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#t:PhysicalDeviceFloatControlsPropertiesKHR" title="Vulkan.Extensions.VK_KHR_shader_float_controls">PhysicalDeviceFloatControlsPropertiesKHR</a></code>,
 <code><a href="Vulkan-Extensions-VK_KHR_shader_float_controls.html#t:ShaderFloatControlsIndependenceKHR" title="Vulkan.Extensions.VK_KHR_shader_float_controls">ShaderFloatControlsIndependenceKHR</a></code></p><h1>Document Notes</h1><p>For more information, see the
 <a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#VK_KHR_shader_float_controls">Vulkan Specification</a></p><p>This page is a generated document. Fixes and changes should be made to
 the generator scripts, not directly.</p></div></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">pattern</span> <a id="v:STRUCTURE_TYPE_PHYSICAL_DEVICE_FLOAT_CONTROLS_PROPERTIES_KHR" class="def">STRUCTURE_TYPE_PHYSICAL_DEVICE_FLOAT_CONTROLS_PROPERTIES_KHR</a> :: <a href="Vulkan-Core10-Enums-StructureType.html#t:StructureType" title="Vulkan.Core10.Enums.StructureType">StructureType</a> <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#STRUCTURE_TYPE_PHYSICAL_DEVICE_FLOAT_CONTROLS_PROPERTIES_KHR" class="link">Source</a> <a href="#v:STRUCTURE_TYPE_PHYSICAL_DEVICE_FLOAT_CONTROLS_PROPERTIES_KHR" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a id="v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_32_BIT_ONLY_KHR" class="def">SHADER_FLOAT_CONTROLS_INDEPENDENCE_32_BIT_ONLY_KHR</a> :: <a href="Vulkan-Core12-Enums-ShaderFloatControlsIndependence.html#t:ShaderFloatControlsIndependence" title="Vulkan.Core12.Enums.ShaderFloatControlsIndependence">ShaderFloatControlsIndependence</a> <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#SHADER_FLOAT_CONTROLS_INDEPENDENCE_32_BIT_ONLY_KHR" class="link">Source</a> <a href="#v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_32_BIT_ONLY_KHR" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a id="v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_ALL_KHR" class="def">SHADER_FLOAT_CONTROLS_INDEPENDENCE_ALL_KHR</a> :: <a href="Vulkan-Core12-Enums-ShaderFloatControlsIndependence.html#t:ShaderFloatControlsIndependence" title="Vulkan.Core12.Enums.ShaderFloatControlsIndependence">ShaderFloatControlsIndependence</a> <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#SHADER_FLOAT_CONTROLS_INDEPENDENCE_ALL_KHR" class="link">Source</a> <a href="#v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_ALL_KHR" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a id="v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_NONE_KHR" class="def">SHADER_FLOAT_CONTROLS_INDEPENDENCE_NONE_KHR</a> :: <a href="Vulkan-Core12-Enums-ShaderFloatControlsIndependence.html#t:ShaderFloatControlsIndependence" title="Vulkan.Core12.Enums.ShaderFloatControlsIndependence">ShaderFloatControlsIndependence</a> <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#SHADER_FLOAT_CONTROLS_INDEPENDENCE_NONE_KHR" class="link">Source</a> <a href="#v:SHADER_FLOAT_CONTROLS_INDEPENDENCE_NONE_KHR" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ShaderFloatControlsIndependenceKHR" class="def">ShaderFloatControlsIndependenceKHR</a> = <a href="Vulkan-Core12-Enums-ShaderFloatControlsIndependence.html#t:ShaderFloatControlsIndependence" title="Vulkan.Core12.Enums.ShaderFloatControlsIndependence">ShaderFloatControlsIndependence</a> <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#ShaderFloatControlsIndependenceKHR" class="link">Source</a> <a href="#t:ShaderFloatControlsIndependenceKHR" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PhysicalDeviceFloatControlsPropertiesKHR" class="def">PhysicalDeviceFloatControlsPropertiesKHR</a> = <a href="Vulkan-Core12-Promoted_From_VK_KHR_shader_float_controls.html#t:PhysicalDeviceFloatControlsProperties" title="Vulkan.Core12.Promoted_From_VK_KHR_shader_float_controls">PhysicalDeviceFloatControlsProperties</a> <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#PhysicalDeviceFloatControlsPropertiesKHR" class="link">Source</a> <a href="#t:PhysicalDeviceFloatControlsPropertiesKHR" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION" class="def">KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION</a> = 4 <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION" class="link">Source</a> <a href="#t:KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a id="v:KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION" class="def">KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION</a> :: <span class="keyword">forall</span> a. <a href="https://hackage.haskell.org/package/base-4.13.0.0/docs/Prelude.html#t:Integral" title="Prelude">Integral</a> a =&gt; a <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION" class="link">Source</a> <a href="#v:KHR_SHADER_FLOAT_CONTROLS_SPEC_VERSION" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME" class="def">KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME</a> = &quot;VK_KHR_shader_float_controls&quot; <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME" class="link">Source</a> <a href="#t:KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a id="v:KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME" class="def">KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME</a> :: <span class="keyword">forall</span> a. (<a href="https://hackage.haskell.org/package/base-4.13.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.13.0.0/docs/Data-String.html#t:IsString" title="Data.String">IsString</a> a) =&gt; a <a href="src/Vulkan.Extensions.VK_KHR_shader_float_controls.html#KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME" class="link">Source</a> <a href="#v:KHR_SHADER_FLOAT_CONTROLS_EXTENSION_NAME" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>