<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Vulkan.Extensions.VK_AMD_shader_fragment_mask</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">vulkan-3.7: Bindings to the Vulkan graphics API.</span><ul class="links" id="page-menu"><li><a href="src/Vulkan.Extensions.VK_AMD_shader_fragment_mask.html">Source</a></li><li><a href="https://hackage.haskell.org/package/vulkan-3.7">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Vulkan.Extensions.VK_AMD_shader_fragment_mask</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Name</h1><p>VK_AMD_shader_fragment_mask - device extension</p><h2>VK_AMD_shader_fragment_mask</h2><dl><dt><strong>Name String</strong></dt><dd><code>VK_AMD_shader_fragment_mask</code></dd></dl><dl><dt><strong>Extension Type</strong></dt><dd>Device extension</dd><dt><strong>Registered Extension Number</strong></dt><dd>138</dd><dt><strong>Revision</strong></dt><dd>1</dd><dt><strong>Extension and Version Dependencies</strong></dt><dd><ul><li>Requires Vulkan 1.0</li></ul></dd><dt><strong>Contact</strong></dt><dd><ul><li>Aaron Hagan
    <a href="https://github.com/KhronosGroup/Vulkan-Docs/issues/new?title=VK_AMD_shader_fragment_mask:%20&amp;body=@AaronHaganAMD%20">https://github.com/KhronosGroup/Vulkan-Docs/issues/new?title=VK_AMD_shader_fragment_mask:%20&amp;body=@AaronHaganAMD%20</a></li></ul></dd></dl><h2>Other Extension Metadata</h2><dl><dt><strong>Last Modified Date</strong></dt><dd>2017-08-16</dd></dl><dl><dt><strong>IP Status</strong></dt><dd>No known IP claims.</dd><dt><strong>Interactions and External Dependencies</strong></dt><dd><ul><li>This extension requires
    <a href="https://htmlpreview.github.io/?https://github.com/KhronosGroup/SPIRV-Registry/blob/master/extensions/AMD/SPV_AMD_shader_fragment_mask.html">SPV_AMD_shader_fragment_mask</a></li></ul></dd><dt><strong>Contributors</strong></dt><dd><ul><li>Aaron Hagan, AMD</li><li>Daniel Rakos, AMD</li><li>Timothy Lottes, AMD</li></ul></dd></dl><h2>Description</h2><p>This extension provides efficient read access to the fragment mask in
 compressed multisampled color surfaces. The fragment mask is a lookup
 table that associates color samples with color fragment values.</p><p>From a shader, the fragment mask can be fetched with a call to
 <code>fragmentMaskFetchAMD</code>, which returns a single <code>uint</code> where each
 subsequent four bits specify the color fragment index corresponding to
 the color sample, starting from the least significant bit. For example,
 when eight color samples are used, the color fragment index for color
 sample 0 will be in bits 0-3 of the fragment mask, for color sample 7
 the index will be in bits 28-31.</p><p>The color fragment for a particular color sample may then be fetched
 with the corresponding fragment mask value using the <code>fragmentFetchAMD</code>
 shader function.</p><h2>New Enum Constants</h2><ul><li><code><a href="Vulkan-Extensions-VK_AMD_shader_fragment_mask.html#t:AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME" title="Vulkan.Extensions.VK_AMD_shader_fragment_mask">AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME</a></code></li></ul><ul><li><code><a href="Vulkan-Extensions-VK_AMD_shader_fragment_mask.html#t:AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION" title="Vulkan.Extensions.VK_AMD_shader_fragment_mask">AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION</a></code></li></ul><h2>New SPIR-V Capabilities</h2><ul><li><a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#spirvenv-capabilities-table-fragmentmaskamd">FragmentMaskAMD</a></li></ul><h2>Examples</h2><p>This example shows a shader that queries the fragment mask from a
 multisampled compressed surface and uses it to query fragment values.</p><pre>#version 450 core

#extension GL_AMD_shader_fragment_mask: enable

layout(binding = 0) uniform sampler2DMS       s2DMS;
layout(binding = 1) uniform isampler2DMSArray is2DMSArray;

layout(binding = 2, input_attachment_index = 0) uniform usubpassInputMS usubpassMS;

layout(location = 0) out vec4 fragColor;

void main()
{
    vec4 fragOne = vec4(0.0);

    uint fragMask = fragmentMaskFetchAMD(s2DMS, ivec2(2, 3));
    uint fragIndex = (fragMask &amp; 0xF0) &gt;&gt; 4;
    fragOne += fragmentFetchAMD(s2DMS, ivec2(2, 3), 1);

    fragMask = fragmentMaskFetchAMD(is2DMSArray, ivec3(2, 3, 1));
    fragIndex = (fragMask &amp; 0xF0) &gt;&gt; 4;
    fragOne += fragmentFetchAMD(is2DMSArray, ivec3(2, 3, 1), fragIndex);

    fragMask = fragmentMaskFetchAMD(usubpassMS);
    fragIndex = (fragMask &amp; 0xF0) &gt;&gt; 4;
    fragOne += fragmentFetchAMD(usubpassMS, fragIndex);

    fragColor = fragOne;
}</pre><h2>Version History</h2><ul><li><p>Revision 1, 2017-08-16 (Aaron Hagan)</p><ul><li>Initial draft</li></ul></li></ul><h1>See Also</h1><p>No cross-references are available</p><h1>Document Notes</h1><p>For more information, see the
 <a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#VK_AMD_shader_fragment_mask">Vulkan Specification</a></p><p>This page is a generated document. Fixes and changes should be made to
 the generator scripts, not directly.</p></div></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION" class="def">AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION</a> = 1 <a href="src/Vulkan.Extensions.VK_AMD_shader_fragment_mask.html#AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION" class="link">Source</a> <a href="#t:AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a id="v:AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION" class="def">AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION</a> :: <span class="keyword">forall</span> a. <a href="https://hackage.haskell.org/package/base-4.13.0.0/docs/Prelude.html#t:Integral" title="Prelude">Integral</a> a =&gt; a <a href="src/Vulkan.Extensions.VK_AMD_shader_fragment_mask.html#AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION" class="link">Source</a> <a href="#v:AMD_SHADER_FRAGMENT_MASK_SPEC_VERSION" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME" class="def">AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME</a> = &quot;VK_AMD_shader_fragment_mask&quot; <a href="src/Vulkan.Extensions.VK_AMD_shader_fragment_mask.html#AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME" class="link">Source</a> <a href="#t:AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">pattern</span> <a id="v:AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME" class="def">AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME</a> :: <span class="keyword">forall</span> a. (<a href="https://hackage.haskell.org/package/base-4.13.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.13.0.0/docs/Data-String.html#t:IsString" title="Data.String">IsString</a> a) =&gt; a <a href="src/Vulkan.Extensions.VK_AMD_shader_fragment_mask.html#AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME" class="link">Source</a> <a href="#v:AMD_SHADER_FRAGMENT_MASK_EXTENSION_NAME" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>